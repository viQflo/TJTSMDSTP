<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.database.BoardMapper">
    <resultMap id="BoardDTOResultMap" type="com.smhrd.model.BoardDTO">
    <id property="postIdx" column="POST_IDX"/>
    <result property="postTitle" column="POST_TITLE"/>
    <result property="postContent" column="POST_CONTENT"/>
    <result property="postFile" column="POST_FILE"/>
    <result property="createDt" column="CREATE_DT"/>
    <result property="postViews" column="POST_VIEWS"/>
    <result property="postLikes" column="POST_LIKES"/>
    <result property="email" column="EMAIL"/>
</resultMap>

   <insert id="write" parameterType="com.smhrd.model.BoardDTO">
   INSERT INTO TB_POST (
     POST_IDX,
     POST_TITLE,
     POST_CONTENT,
     POST_FILE,
     CREATE_DT,
     POST_VIEWS,
     POST_LIKES,
     EMAIL
   ) 
   VALUES (
     TB_POST_SEQ.NEXTVAL,
     #{postTitle, jdbcType=VARCHAR},
     #{postContent, jdbcType=VARCHAR},
     #{postFile, jdbcType=VARCHAR},
     CURRENT_TIMESTAMP,
     0,
     0,
     #{email, jdbcType=VARCHAR}
   )
</insert>

   <!-- 게시글 목록 조회 -->
    <select id="getList" resultType="com.smhrd.model.BoardDTO">
        SELECT POST_IDX, POST_TITLE, POST_CONTENT, POST_FILE, CREATE_DT, POST_VIEWS, POST_LIKES, EMAIL
        FROM TB_POST
        ORDER BY POST_IDX
    </select>
    
    <!-- 게시글 상세 조회 -->
    <select id="getBoardContent" parameterType="int" resultType="com.smhrd.model.BoardDTO">
        SELECT POST_IDX, POST_TITLE, POST_CONTENT, POST_FILE, CREATE_DT, POST_VIEWS, POST_LIKES, EMAIL
        FROM TB_POST
        WHERE POST_IDX = #{idx}
    </select>

     <!-- 게시글 수정 -->
    <update id="updateBoard" parameterType="com.smhrd.model.BoardDTO">
        UPDATE TB_POST
        SET POST_TITLE = #{postTitle}, POST_CONTENT = #{postContent}, POST_FILE = #{postFile}
        WHERE POST_IDX = #{postIdx}
    </update>
    
    <!-- 게시글 삭제 -->
    <delete id="deleteBoard" parameterType="int">
        DELETE FROM TB_POST WHERE POST_IDX = #{idx}
    </delete>
    
</mapper>