<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BoardMapper">

    <!-- 게시글 목록 조회 -->
    <select id="getAllPosts" resultType="com.smhrd.model.BoardDTO">
        SELECT * FROM TB_POST ORDER BY CREATE_DT DESC
    </select>

    <!-- 특정 게시글 조회 -->
    <select id="getPostById" parameterType="int" resultType="com.smhrd.model.BoardDTO">
        SELECT * FROM TB_POST WHERE POST_IDX = #{postIdx}
    </select>

    <!-- 게시글 작성 -->
    <insert id="insertPost" parameterType="com.smhrd.model.BoardDTO">
        INSERT INTO TB_POST (POST_TITLE, POST_CONTENT, POST_FILE, CREATE_DT, POST_VIEWS, POST_LIKES, EMAIL)
        VALUES (#{postTitle}, #{postContent}, #{postFile}, SYSTIMESTAMP, 0, 0, #{email})
    </insert>

    <!-- 게시글 수정 -->
    <update id="updatePost" parameterType="com.smhrd.model.BoardDTO">
        UPDATE TB_POST
        SET POST_TITLE = #{postTitle},
            POST_CONTENT = #{postContent},
            POST_FILE = #{postFile}
        WHERE POST_IDX = #{postIdx}
    </update>

    <!-- 게시글 삭제 -->
    <delete id="deletePost" parameterType="int">
        DELETE FROM TB_POST WHERE POST_IDX = #{postIdx}
    </delete>

</mapper>
